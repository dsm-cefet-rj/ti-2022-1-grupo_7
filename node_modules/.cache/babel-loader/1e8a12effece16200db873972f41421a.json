{"ast":null,"code":"import { store } from './store';\nimport { logout } from \"./UserSlice\";\n\nasync function client(endpoint) {\n  let {\n    body,\n    ...customConfig\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const headers = {\n    'Content-Type': 'application/json'\n  };\n  const {\n    user: {\n      token\n    }\n  } = store.getState();\n  const config = {\n    method: body ? 'POST' : 'GET',\n    ...customConfig,\n    headers: { ...headers,\n      ...customConfig.headers,\n      'Authorization': token && `Bearer ${token}`\n    }\n  };\n\n  if (body) {\n    config.body = JSON.stringify(body);\n  }\n\n  let data, response;\n\n  try {\n    response = await window.fetch(endpoint, config);\n    data = await response.json();\n\n    if (response.ok) {\n      return data;\n    }\n\n    throw new Error(response.statusText);\n  } catch (err) {\n    if (response.status == 401) {\n      store.dispatch(logout());\n    }\n\n    return Promise.reject(err.message ? err.message : data);\n  }\n}\n\nexport const httpGet = async function (endpoint) {\n  let customConfig = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return client(endpoint, { ...customConfig,\n    method: 'GET'\n  });\n};\nexport const httpPost = async function (endpoint, body) {\n  let customConfig = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return client(endpoint, {\n    body,\n    ...customConfig,\n    method: 'POST'\n  });\n};\nexport const httpPut = async function (endpoint, body) {\n  let customConfig = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return client(endpoint, {\n    body,\n    ...customConfig,\n    method: 'PUT'\n  });\n};\nexport const httpDelete = async function (endpoint) {\n  let customConfig = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return client(endpoint, { ...customConfig,\n    method: 'DELETE'\n  });\n};","map":{"version":3,"names":["store","logout","client","endpoint","body","customConfig","headers","user","token","getState","config","method","JSON","stringify","data","response","window","fetch","json","ok","Error","statusText","err","status","dispatch","Promise","reject","message","httpGet","httpPost","httpPut","httpDelete"],"sources":["C:/Users/Victor/Desktop/Projeto/PSW/ti-2022-1-grupo_7-front-end/src/components/Redux/utils.js"],"sourcesContent":["import { store } from './store';\r\nimport { logout } from \"./UserSlice\";\r\n\r\nasync function client(endpoint, { body, ...customConfig } = {}) {\r\n    const headers = { 'Content-Type': 'application/json' }\r\n    const { user: { token } } = store.getState();\r\n\r\n    const config = {\r\n      method: body ? 'POST' : 'GET',\r\n      ...customConfig,\r\n      headers: {\r\n        ...headers,\r\n        ...customConfig.headers,\r\n        'Authorization': token && `Bearer ${token}`\r\n      }\r\n    }\r\n\r\n    if (body) {\r\n      config.body = JSON.stringify(body)\r\n    }\r\n\r\n    let data, response\r\n    try {\r\n      response = await window.fetch(endpoint, config)\r\n      data = await response.json()\r\n      if (response.ok) {\r\n        return data\r\n      }\r\n      throw new Error(response.statusText)\r\n    } catch (err) {\r\n      if (response.status == 401) {\r\n        store.dispatch(logout());\r\n      }\r\n      return Promise.reject(err.message ? err.message : data)\r\n    }\r\n  }\r\n\r\n  export const httpGet = async function (endpoint, customConfig = {}) {\r\n    return client(endpoint, { ...customConfig, method: 'GET' })\r\n  }\r\n\r\n  export const httpPost = async function (endpoint, body, customConfig = {}) {\r\n    return client(endpoint, {body, ...customConfig, method: 'POST'})\r\n  }\r\n\r\n  export const httpPut = async function (endpoint, body, customConfig = {}) {\r\n    return client(endpoint, {body, ...customConfig, method: 'PUT'})\r\n  }\r\n\r\n  export const httpDelete = async function (endpoint, customConfig = {}) {\r\n    return client(endpoint, { ...customConfig, method: 'DELETE' })\r\n  } "],"mappings":"AAAA,SAASA,KAAT,QAAsB,SAAtB;AACA,SAASC,MAAT,QAAuB,aAAvB;;AAEA,eAAeC,MAAf,CAAsBC,QAAtB,EAAgE;EAAA,IAAhC;IAAEC,IAAF;IAAQ,GAAGC;EAAX,CAAgC,uEAAJ,EAAI;EAC5D,MAAMC,OAAO,GAAG;IAAE,gBAAgB;EAAlB,CAAhB;EACA,MAAM;IAAEC,IAAI,EAAE;MAAEC;IAAF;EAAR,IAAsBR,KAAK,CAACS,QAAN,EAA5B;EAEA,MAAMC,MAAM,GAAG;IACbC,MAAM,EAAEP,IAAI,GAAG,MAAH,GAAY,KADX;IAEb,GAAGC,YAFU;IAGbC,OAAO,EAAE,EACP,GAAGA,OADI;MAEP,GAAGD,YAAY,CAACC,OAFT;MAGP,iBAAiBE,KAAK,IAAK,UAASA,KAAM;IAHnC;EAHI,CAAf;;EAUA,IAAIJ,IAAJ,EAAU;IACRM,MAAM,CAACN,IAAP,GAAcQ,IAAI,CAACC,SAAL,CAAeT,IAAf,CAAd;EACD;;EAED,IAAIU,IAAJ,EAAUC,QAAV;;EACA,IAAI;IACFA,QAAQ,GAAG,MAAMC,MAAM,CAACC,KAAP,CAAad,QAAb,EAAuBO,MAAvB,CAAjB;IACAI,IAAI,GAAG,MAAMC,QAAQ,CAACG,IAAT,EAAb;;IACA,IAAIH,QAAQ,CAACI,EAAb,EAAiB;MACf,OAAOL,IAAP;IACD;;IACD,MAAM,IAAIM,KAAJ,CAAUL,QAAQ,CAACM,UAAnB,CAAN;EACD,CAPD,CAOE,OAAOC,GAAP,EAAY;IACZ,IAAIP,QAAQ,CAACQ,MAAT,IAAmB,GAAvB,EAA4B;MAC1BvB,KAAK,CAACwB,QAAN,CAAevB,MAAM,EAArB;IACD;;IACD,OAAOwB,OAAO,CAACC,MAAR,CAAeJ,GAAG,CAACK,OAAJ,GAAcL,GAAG,CAACK,OAAlB,GAA4Bb,IAA3C,CAAP;EACD;AACF;;AAED,OAAO,MAAMc,OAAO,GAAG,gBAAgBzB,QAAhB,EAA6C;EAAA,IAAnBE,YAAmB,uEAAJ,EAAI;EAClE,OAAOH,MAAM,CAACC,QAAD,EAAW,EAAE,GAAGE,YAAL;IAAmBM,MAAM,EAAE;EAA3B,CAAX,CAAb;AACD,CAFM;AAIP,OAAO,MAAMkB,QAAQ,GAAG,gBAAgB1B,QAAhB,EAA0BC,IAA1B,EAAmD;EAAA,IAAnBC,YAAmB,uEAAJ,EAAI;EACzE,OAAOH,MAAM,CAACC,QAAD,EAAW;IAACC,IAAD;IAAO,GAAGC,YAAV;IAAwBM,MAAM,EAAE;EAAhC,CAAX,CAAb;AACD,CAFM;AAIP,OAAO,MAAMmB,OAAO,GAAG,gBAAgB3B,QAAhB,EAA0BC,IAA1B,EAAmD;EAAA,IAAnBC,YAAmB,uEAAJ,EAAI;EACxE,OAAOH,MAAM,CAACC,QAAD,EAAW;IAACC,IAAD;IAAO,GAAGC,YAAV;IAAwBM,MAAM,EAAE;EAAhC,CAAX,CAAb;AACD,CAFM;AAIP,OAAO,MAAMoB,UAAU,GAAG,gBAAgB5B,QAAhB,EAA6C;EAAA,IAAnBE,YAAmB,uEAAJ,EAAI;EACrE,OAAOH,MAAM,CAACC,QAAD,EAAW,EAAE,GAAGE,YAAL;IAAmBM,MAAM,EAAE;EAA3B,CAAX,CAAb;AACD,CAFM"},"metadata":{},"sourceType":"module"}