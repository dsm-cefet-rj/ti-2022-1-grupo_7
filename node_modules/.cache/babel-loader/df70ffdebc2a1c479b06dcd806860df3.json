{"ast":null,"code":"import { createAction, createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { httpPost } from './utils';\nconst baseUrl = 'http://localhost:3004';\nexport const login = createAsyncThunk(\"user/login\", async credentials => {\n  return await httpPost(`${baseUrl}/users/login`, credentials);\n});\nexport const signUp = createAsyncThunk(\"user/signup\", async credentials => {\n  return await httpPost(`${baseUrl}/users/signup`, credentials);\n});\nconst initialState = {\n  token: \"\",\n  userInfo: {\n    email: \"\",\n    isSeller: false\n  },\n  count: 0,\n  profileStats: {\n    name: \"Nome do Cliente\",\n    username: \"teste\",\n    pic: process.env.PUBLIC_URL + \"/static/media/exemplo1.7ca3377e5e8501c6a6bd.jpeg\",\n    photoCount: 2,\n    stars: 4.5,\n    followers: 500,\n    following: 500\n  }\n};\nexport const logout = createAction('user/logout');\nconst userSlice = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    logout: () => initialState\n  },\n  extraReducers: {\n    [login.pending]: state => {\n      state.status = \"loading\";\n    },\n    [login.fulfilled]: (state, action) => {\n      const {\n        token,\n        name,\n        email,\n        profilePicture: pic,\n        isSeller,\n        username\n      } = action.payload;\n      return { ...state,\n        status: \"loaded\",\n        token,\n        userInfo: { ...state.userInfo,\n          email,\n          isSeller,\n          name\n        },\n        profileStats: { ...state.profileStats,\n          pic,\n          username\n        }\n      };\n    },\n    [login.rejected]: (state, action) => {\n      state.status = \"failed\";\n      state.error = action.error.message;\n    },\n    [signUp.pending]: state => {\n      state.status = \"loading\";\n    },\n    [signUp.rejected]: (state, action) => {\n      state.status = \"failed\";\n      state.error = action.error.message;\n    }\n  }\n});\nexport default userSlice.reducer;","map":{"version":3,"names":["createAction","createAsyncThunk","createSlice","httpPost","baseUrl","login","credentials","signUp","initialState","token","userInfo","email","isSeller","count","profileStats","name","username","pic","process","env","PUBLIC_URL","photoCount","stars","followers","following","logout","userSlice","reducers","extraReducers","pending","state","status","fulfilled","action","profilePicture","payload","rejected","error","message","reducer"],"sources":["C:/Users/Victor/Desktop/Projeto/PSW/ti-2022-1-grupo_7/src/components/Redux/UserSlice.js"],"sourcesContent":["import { createAction, createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport { httpPost } from './utils';\r\n\r\nconst baseUrl = 'http://localhost:3004';\r\n\r\nexport const login = createAsyncThunk(\"user/login\", async (credentials) => {\r\n    return await httpPost(`${baseUrl}/users/login`, credentials);\r\n});\r\n\r\nexport const signUp = createAsyncThunk(\"user/signup\", async (credentials) => {\r\n    return await httpPost(`${baseUrl}/users/signup`, credentials);\r\n});\r\n\r\nconst initialState = {\r\n    token: \"\",\r\n    userInfo: {\r\n        email: \"\",\r\n        isSeller: false\r\n    },\r\n    count: 0,\r\n    profileStats: {\r\n        name: \"Nome do Cliente\",\r\n        username: \"teste\",\r\n        pic: process.env.PUBLIC_URL + \"/static/media/exemplo1.7ca3377e5e8501c6a6bd.jpeg\",\r\n        photoCount: 2,\r\n        stars: 4.5,\r\n        followers: 500, \r\n        following: 500\r\n    }\r\n};\r\n\r\nexport const logout = createAction('user/logout');\r\n\r\nconst userSlice = createSlice({\r\n    name: 'user',\r\n    initialState,\r\n    reducers: {\r\n        logout: () => initialState,\r\n    },\r\n    extraReducers: {\r\n        [login.pending]: (state) => { state.status = \"loading\"; },\r\n        [login.fulfilled]: (state, action) => {\r\n            const { token, name, email, profilePicture: pic, isSeller, username } = action.payload;\r\n            return { \r\n                ...state,\r\n                status: \"loaded\",\r\n                token,\r\n                userInfo: { ...state.userInfo, email, isSeller, name }, \r\n                profileStats: {...state.profileStats, pic, username}\r\n            };\r\n        },\r\n        [login.rejected]: (state, action) => {\r\n            state.status = \"failed\";\r\n            state.error = action.error.message;\r\n        },\r\n        [signUp.pending]: (state) => { state.status = \"loading\"; },\r\n        [signUp.rejected]: (state, action) => {\r\n            state.status = \"failed\";\r\n            state.error = action.error.message;\r\n        },\r\n    }\r\n})\r\n\r\nexport default userSlice.reducer"],"mappings":"AAAA,SAASA,YAAT,EAAuBC,gBAAvB,EAAyCC,WAAzC,QAA4D,kBAA5D;AACA,SAASC,QAAT,QAAyB,SAAzB;AAEA,MAAMC,OAAO,GAAG,uBAAhB;AAEA,OAAO,MAAMC,KAAK,GAAGJ,gBAAgB,CAAC,YAAD,EAAe,MAAOK,WAAP,IAAuB;EACvE,OAAO,MAAMH,QAAQ,CAAE,GAAEC,OAAQ,cAAZ,EAA2BE,WAA3B,CAArB;AACH,CAFoC,CAA9B;AAIP,OAAO,MAAMC,MAAM,GAAGN,gBAAgB,CAAC,aAAD,EAAgB,MAAOK,WAAP,IAAuB;EACzE,OAAO,MAAMH,QAAQ,CAAE,GAAEC,OAAQ,eAAZ,EAA4BE,WAA5B,CAArB;AACH,CAFqC,CAA/B;AAIP,MAAME,YAAY,GAAG;EACjBC,KAAK,EAAE,EADU;EAEjBC,QAAQ,EAAE;IACNC,KAAK,EAAE,EADD;IAENC,QAAQ,EAAE;EAFJ,CAFO;EAMjBC,KAAK,EAAE,CANU;EAOjBC,YAAY,EAAE;IACVC,IAAI,EAAE,iBADI;IAEVC,QAAQ,EAAE,OAFA;IAGVC,GAAG,EAAEC,OAAO,CAACC,GAAR,CAAYC,UAAZ,GAAyB,kDAHpB;IAIVC,UAAU,EAAE,CAJF;IAKVC,KAAK,EAAE,GALG;IAMVC,SAAS,EAAE,GAND;IAOVC,SAAS,EAAE;EAPD;AAPG,CAArB;AAkBA,OAAO,MAAMC,MAAM,GAAGzB,YAAY,CAAC,aAAD,CAA3B;AAEP,MAAM0B,SAAS,GAAGxB,WAAW,CAAC;EAC1Ba,IAAI,EAAE,MADoB;EAE1BP,YAF0B;EAG1BmB,QAAQ,EAAE;IACNF,MAAM,EAAE,MAAMjB;EADR,CAHgB;EAM1BoB,aAAa,EAAE;IACX,CAACvB,KAAK,CAACwB,OAAP,GAAkBC,KAAD,IAAW;MAAEA,KAAK,CAACC,MAAN,GAAe,SAAf;IAA2B,CAD9C;IAEX,CAAC1B,KAAK,CAAC2B,SAAP,GAAmB,CAACF,KAAD,EAAQG,MAAR,KAAmB;MAClC,MAAM;QAAExB,KAAF;QAASM,IAAT;QAAeJ,KAAf;QAAsBuB,cAAc,EAAEjB,GAAtC;QAA2CL,QAA3C;QAAqDI;MAArD,IAAkEiB,MAAM,CAACE,OAA/E;MACA,OAAO,EACH,GAAGL,KADA;QAEHC,MAAM,EAAE,QAFL;QAGHtB,KAHG;QAIHC,QAAQ,EAAE,EAAE,GAAGoB,KAAK,CAACpB,QAAX;UAAqBC,KAArB;UAA4BC,QAA5B;UAAsCG;QAAtC,CAJP;QAKHD,YAAY,EAAE,EAAC,GAAGgB,KAAK,CAAChB,YAAV;UAAwBG,GAAxB;UAA6BD;QAA7B;MALX,CAAP;IAOH,CAXU;IAYX,CAACX,KAAK,CAAC+B,QAAP,GAAkB,CAACN,KAAD,EAAQG,MAAR,KAAmB;MACjCH,KAAK,CAACC,MAAN,GAAe,QAAf;MACAD,KAAK,CAACO,KAAN,GAAcJ,MAAM,CAACI,KAAP,CAAaC,OAA3B;IACH,CAfU;IAgBX,CAAC/B,MAAM,CAACsB,OAAR,GAAmBC,KAAD,IAAW;MAAEA,KAAK,CAACC,MAAN,GAAe,SAAf;IAA2B,CAhB/C;IAiBX,CAACxB,MAAM,CAAC6B,QAAR,GAAmB,CAACN,KAAD,EAAQG,MAAR,KAAmB;MAClCH,KAAK,CAACC,MAAN,GAAe,QAAf;MACAD,KAAK,CAACO,KAAN,GAAcJ,MAAM,CAACI,KAAP,CAAaC,OAA3B;IACH;EApBU;AANW,CAAD,CAA7B;AA8BA,eAAeZ,SAAS,CAACa,OAAzB"},"metadata":{},"sourceType":"module"}